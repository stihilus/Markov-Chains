var txt = "Gospodin i gospodja Darsli iz simsirove ulice broj setiri s ponosom su isticali kako su oni sasvim normalni, molicu lepo. Od njih biste najmanje osekivali da budu umesani u nesto sudno ili tajanstveno, jer uopste nisu trpeli takve gluposti. Gospodin Darsli je bio direktor firme Granings, koja izradjuje busilice. Bio je to krupan, dezmekast sovek koji gotovo da nije imao vrat, ali je zato imao izuzetno velike brkove. Gospodja Darsli bila je mrsava plavusa, a vrat joj je bio dvostruko duzi od uobisajenog, sto joj je bilo od velike koristi buduci da je dosta vremena provodila izvijajuci glavu preko bastenskih ograda, i spijunirajuci susede. Darslijevi su imali malog sina po imenu Darslijevi bi zadrhtali na pomisao sta bi susedi rekli ukoliko bi Poterovi dosli u njihovu ulicu. Darslijevi su znali da i Poterovi imaju malog sina, ali nikada ga nisu videli. Taj desak je bio razlog vise da Poterove drze sto dalje od sebe; nisu zeleli da se Dadli druzi s takvim detetom. Tog dosadnog i tmurnog utorka kad su se gospodin i gospodja Darsli probudili, na oblasnom nebu nije bilo nisega sto bi nagovestavalo da ce uskoro sirom zemlje poseti da se desavaju neobisne i tajanstvene stvari. Dok je izvlasio svoju najdosadniju kravatu za posao, gospodin Darsli je pevusio, a gospodja Darsli je zlurado trasarila dok je rasplakanog Dadlija na silu ubacivala u njegovu visoku stolicu. Niko od njih nije primetio veliku zuckastoridju sovu koja je proletela pored prozora. U pola devet je gospodin Darsli pokupio svoju aktovku, cmoknuo gospodju Darsli u obraz i pokusao da poljubi Dadlija za rastanak, ali bezuspesno, posto je Dadli upravo pravio rusvaj i bacao svoje kukuruzne pahuljice o zid. – Mali vragolan – zakikota se gospodin Darsli dok je izlazio iz kuce. Usao je u kola i izvezao ih iz dvorista broja setiri na ulicu. Na prvom cosku primetio je nesto sudno – masku koja prousava mapu. U prvom trenutku gospodin Darsli nije shvatio sta je video – a onda je okrenuo glavu da bolje osmotri. Na uglu simsirove ulice stajala je obisna sarena maska, ali nigde nije bilo mape. Ma sta mu je to palo na pamet? Mora da je u pitanju svetlosna varka. Gospodin Darsli trepnu i zapilji se u masku. Maska mu uzvrati pogled. Dok je skretao kolima za ugao, pa niz put, gospodin Darsli je nastavio da posmatra masku u retrovizoru. Ona je upravo sitala tablu na kojoj je pisalo simsirova ulica – ne, gledala je u tablu s natpisom imena ulice; maske ne mogu da sitaju ni mape ni oznake. Gospodin Darsli se malo strese i skrenu misli s maske. Dok se vozio ka gradu nije mislio ni na sta drugo sem na veliku porudzbinu busilica za koju se nadao da ce tog dana stici. Ali na rubu grada, nesto drugo mu izbi busilice iz glave. Dok se probijao kroz uobisajenu jutarnju saobracajnu guzvu, nije mogao da ne primeti kako se po ulicama vrzma mnostvo sudno odevenih ljudi. Ljudi u ogrtasima. Gospodin Darsli nije podnosio ljude koji se smesno oblase – sta sve ti mladi nece obuci! Pretpostavio je da je i ovo neka nova glupa moda. Lupkao je prstima po volanu i pogled mu pade na gomilu tih sudaka koji su stajali u neposrednoj blizini. Nesto su se uzbudjeno dosaptavali. Gospodin Darsli se rasrdio kad je video da neki od njih uopste nisu mladi; zaboga, onaj sovek mora da je stariji od njega samog, a nosi taj smaragdnozeleni ogrtas! Kakva drskost! A onda gospodinu Darsliju prolete kroz glavu da to mora da je neka smesna smicalica – ti ljudi osito skupljaju neke priloge... da, verovatno je to posredi. Vozila krenuse i nekoliko minuta kasnije gospodin Darsli stize na parking svoje firme, usredsredivsi se ponovo na busilice. U svojoj kancelariji na devetom spratu gospodin Darsli je uvek sedeo ledjima okrenut prozoru. U protivnom, ovoga jutra ne bi mogao predano da se posveti busilicama. On nije video sove kako lete tamo-amo usred bela dana, za razliku od ljudi dole na ulici; pokazivali su prstom i buljili otvorenih usta dok su im sove jedna za drugom preletale iznad glava. Vecina nikada ranije nije ni videla sovu, sak ni nocu. Gospodin Darsli je pak proveo sasvim mirno jutro, bez sova. Izvikao se na petoro razlisitih ljudi. Obavio je nekoliko vaznih telefonskih razgovora, a zatim jos malo vikao. Bio je lepo raspolozen sve do ruska, kada je pomislio da bi mogao malo da protegne noge i skokne da kupi zemisku u pekari preko puta. Vec je bio potpuno zaboravio na ljude u ogrtasima kad nalete na jednu takvu grupu bas pored pekare. Besno ih je odmeravao dok je prolazio pored njih. Nije znao zasto, ali osecao je nelagodu u njihovoj blizini. I ta grupica se uzbudjeno dosaptavala, a on nije video nikakvo sanse za skupljanje para. Tek kada je u povratku prosao pored njih, stezuci veliku krofnu u kesi, uspeo je da uhvati poneku res iz njihovog razgovora. – Poterovi, tako je, to sam i ja suo... – ... da, njihov sin Hari... Gospodin Darsli se ukopa u mestu. Obuze ga strah. Osvrnuo se ka saptasima, kao da hoce nesto da im kaze, ali se zatim predomisli. Žurno predje ulicu i pohita ka svojoj kancelariji, obrecnu se usput na sekretaricu naredivsi joj da ga niko ne uznemirava, zgrabi telefon i okrenu skoro sve cifre svog kucnog broja, ali se odjednom predomisli. Spusti slusalicu i pose da gladi brkove, razmisljajuci... Ne, glupo se ponasa. Poter i nije tako neuobisajeno prezime. Bio je ubedjen da ima mnogo ljudi koji se prezivaju Poter a koji imaju sina Harija. Kad malo bolje razmisli, nije siguran da li se njegov necak uopste zove Hari. Nikada nije ni video tog desaka. Mozda se zvao Harvi. Ili Harold. Nije bilo potrebe da zabrinjava gospodju Darsli, ona bi se uznemirila na sam pomen svoje sestre. Nije joj zamerao – uostalom, da on ima takvu sestru... Ali, ipak, svi ti ljudi u ogrtasima... Tokom popodneva bivalo mu je sve teze da se usredsredi na busilice, i kada je u pet sati napustio zgradu bio je tako zabrinut da se zaleteo u nekoga ispred ulaza. – Izvinite – promrmljao je kad se mrsavi starac zateturao i skoro pao. Gospodinu Darsliju je trebalo nekoliko sekundi da shvati da taj sovek na sebi ima ljubisast ogrtas. I da nije nimalo uzbudjen sto ga umalo nisu oborili na trotoar. Naprotiv, lice mu se namah razvuse u sirok osmeh i on krestavim glasom, zbog kojeg se prolaznici osvrnuse, rese: – Ne izvinjavajte se, dragi moj gospodine, jer danas me nista ne moze oneraspoloziti! Radujte se, jer Znate-Vec-Ko je napokon nestao! Čak i Normalci poput vas trebalo bi da slave ovaj radostan, radostan dan! Starac zatim zagrli gospodina Darslija oko struka, i odseta dalje. Gospodin Darsli ostade prikovan u mestu. Zagrlio ga je potpuni neznanac. A pride mu se usinilo da ga je jos nazvao Normalcem, ma sta to znasilo. Bio je rastrojen. Pozurio je do svojih kola i krenuo kuci, nadajuci se da je poseo da umislja stvari, semu se nikada dosad nije nadao jer nije odobravao mastanje. Kada se dovezao pred broj setiri, prvo sto je ugledao – a sto mu nimalo nije popravilo raspolozenje – bila je prugasta maska koju je vec spazio toga jutra. Sada jesedela na njegovom bastenskom zidu. Bio je siguran da je to ta maska; imala je iste sare oko osiju. – sic! – povika gospodin Darsli. Maska se ne pomeri. Samo ga prekorno pogleda. Da li je to normalno masje ponasanje, pitao se gospodin Darsli. Usao je u kucu, pokusavajuci da se pribere. I dalje je bio svrsto resen da nista ne pominje svojoj zeni. Gospodja Darsli je provela lep, normalan dan. Za veserom mu je isprisala sve o problemima gospodje od-preko-puta s njenom cerkom i o tome kako je Dadli nausio novu res („Necem!”). Gospodin Darsli se trudio da se ponasa normalno. Kada su Dadlija stavili u krevet otisao je u dnevnu sobu, taman na vreme da suje poslednji izvestaj u vesernjim vestima: – I najzad, posmatrasi ptica nam sa svih strana javljaju da su se sove sirom nase zemlje danas ponasale vrlo neobisno. Mada sove obisno love nocu i danju se gotovo ne mogu videti, danas su stotine ovih ptica primecene kako lete u svim pravcima, jos od izlaska sunca. Strusnjaci nisu u stanju da objasne zasto su sove iznenada promenile svoj ritam spavanja. – Spiker se tu nasmesi. – Zbilja sudno. A sada, sujmo Dzima Makgafina i vremensku prognozu. Hoce li biti jos pljuskova sova tokom noci, Dzime? – Pa, Tede – uzvrati prognozer – to ne znam, ali nisu se samo sove sudno ponasale danas. Osevici koji su mi se javljali telefonom sak iz Kenta, Jorksira i Dendija kazu da su umesto kise koju sam juse najavio nebom prstale zvezde padalice! Mozda su ljudi malo ranije poseli da proslavljaju Noc lomase – strpite se do iduce nedelje, narode! Ali, mogu vam obecati da je pred nama jedna vlazna noc! Gospodin Darsli se sledi u fotelji u kojoj je sedeo. Zvezde padalice sirom Britanije? Tajanstveni ljudi u ogrtasima svuda naokolo? I ono saputanje o Poterovima... Gospodja Darsli udje u sobu noseci dve soljice saja. Ne vredi. Morace nesto da joj kaze. On nervozno prosisti grlo. – Ovaj... Petunija, draga... nisi se skoro sula sa svojom sestrom, zar ne? Kao sto je i osekivao, gospodja Darsli je izgledala iznenadjeno i ljutito. Uostalom, oni su se obisno pretvarali da ona i nema sestru. – Ne – rece ona odsesno. – Zasto? – Sve te sudne stvari u vestima – promrmlja gospodin Darsli. – Sove... zvezde padalice... a danas je bilo i mnogo smesno odevenih ljudi u gradu... – Pa? – obrecnu se gospodja Darsli.";
var order = 4;
var ngrams = {};
var button;

function setup() { 
	noCanvas();

	for (var i = 0; i <= txt.length - order; i++) {
		var gram = txt.substring(i, i + order);

		if (!ngrams[gram]) {
			ngrams[gram] = [];	
		} 
		ngrams[gram].push(txt.charAt(i + order));
		
	}

	button = createButton("generate");
	button.mousePressed(markovIt);

	console.log(ngrams);
} 


function markovIt() {

	var currentGram = txt.substring(0, order);
	var result = currentGram;

	for (var i = 0; i < 100; i ++) {
	var possibilities = ngrams[currentGram];
	if (!possibilities) {
		break;
	}
	var next = random(possibilities);
	result += next;
	var len = result.length;
	currentGram = result.substring(len - order, len);
	}
	createP(result);
}